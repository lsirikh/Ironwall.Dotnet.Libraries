<UserControl
	x:Class="Ironwall.Dotnet.Libraries.GMaps.Ui.Views.Maps.MapView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:behavior="clr-namespace:Ironwall.Dotnet.Libraries.Utils.Behaviors;assembly=Ironwall.Dotnet.Libraries.Utils"
	xmlns:cal="http://caliburnmicro.com"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:gmap="clr-namespace:Ironwall.Dotnet.Libraries.GMaps.Ui.GMapCustoms"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:local="clr-namespace:Ironwall.Dotnet.Libraries.GMaps.Ui.Views.Maps"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:utils="clr-namespace:Ironwall.Dotnet.Libraries.Utils;assembly=Ironwall.Dotnet.Libraries.Utils"
	d:DesignHeight="450"
	d:DesignWidth="800"
	FontFamily="{DynamicResource MaterialDesignFont}"
	mc:Ignorable="d">
	<UserControl.Resources>
		<Style
			x:Name="CustomIconButton"
			BasedOn="{StaticResource MaterialDesignIconButton}"
			TargetType="Button">
			<Setter Property="Padding" Value="0" />
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="HorizontalAlignment" Value="Center" />
			<Setter Property="Effect">
				<Setter.Value>
					<DropShadowEffect
						BlurRadius="5"
						Direction="-90"
						RenderingBias="Quality"
						ShadowDepth="5"
						Color="Black" />
				</Setter.Value>
			</Setter>
		</Style>
		<Style
			x:Name="CustomSlider"
			BasedOn="{StaticResource MaterialDesign3.MaterialDesignDiscreteSlider}"
			TargetType="Slider">
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Effect">
				<Setter.Value>
					<DropShadowEffect
						BlurRadius="10"
						Direction="-90"
						RenderingBias="Quality"
						ShadowDepth="5"
						Color="Black" />
				</Setter.Value>
			</Setter>
		</Style>
	</UserControl.Resources>
	<Grid x:Name="MapView_OuterGrid">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<!--<RowDefinition Height="50"/>-->
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="280" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<ToolBarTray
			Grid.Row="0"
			Grid.ColumnSpan="2"
			md:ThemeAssist.Theme="Dark">
			<ToolBar ClipToBounds="True" Style="{StaticResource MaterialDesignToolBar}">
				<ItemsControl ItemsSource="{Binding Buttons}">
					<ItemsControl.ItemsPanel>
						<!--  StackPanel을 사용하여 수평으로 버튼을 배치  -->
						<ItemsPanelTemplate>
							<StackPanel Orientation="Horizontal" />
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Button
								Height="60"
								Command="{Binding Command}"
								CommandParameter="{Binding}"
								Foreground="WhiteSmoke"
								IsEnabled="{Binding IsEnabled}"
								Style="{StaticResource MaterialDesignFlatButton}"
								ToolTip="{Binding ToolTip}">
								<Button.Content>
									<md:PackIcon Kind="{Binding Icon}" />
								</Button.Content>
							</Button>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ToolBar>
		</ToolBarTray>


		<gmap:GMapCustomControl
			x:Name="MainMap"
			Grid.Row="2"
			Grid.ColumnSpan="2"
			MaxZoom="19"
			MinZoom="2">
			<!--<b:Interaction.Behaviors>
				<behavior:MousePointerChangeBehavior CursorImagePath="{Binding CurrentCursorImagePath}" />
			</b:Interaction.Behaviors>-->
		</gmap:GMapCustomControl>

		<Border
			x:Name="MapView_Scale"
			Grid.Row="1"
			Margin="50,5,5,5"
			Padding="5"
			HorizontalAlignment="Left"
			VerticalAlignment="Bottom"
			Background="#88888888"
			CornerRadius="5">

			<Grid
				Grid.Column="3"
				Margin="5"
				HorizontalAlignment="Center"
				VerticalAlignment="Center">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="40" />
					<ColumnDefinition Width="100" />
				</Grid.ColumnDefinitions>
				<TextBlock
					Grid.Column="0"
					FontSize="12"
					FontWeight="Bold"
					Foreground="Black"
					Text="{Binding Scale, FallbackValue=100m}" />
				<Polyline
					Grid.Column="1"
					HorizontalAlignment="Center"
					VerticalAlignment="Center"
					Points="{Binding ScalePoints}"
					Stroke="Black"
					StrokeThickness="2" />
			</Grid>
		</Border>

		<Border
			x:Name="MapView_GeoInformation"
			Grid.Row="1"
			Grid.ColumnSpan="2"
			Margin="50,5,5,5"
			Padding="5"
			HorizontalAlignment="Left"
			VerticalAlignment="Top"
			Background="#88888888"
			CornerRadius="5">

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="5*" />
					<ColumnDefinition Width="2*" />
					<ColumnDefinition Width="2*" />
					<ColumnDefinition Width="auto" />
				</Grid.ColumnDefinitions>
				<!--  Latitude, Longitude, Zoom Information  -->
				<Grid
					Grid.Column="0"
					Margin="5"
					VerticalAlignment="Center">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="60" />
						<ColumnDefinition Width="110" />
						<ColumnDefinition Width="15" />
						<ColumnDefinition Width="70" />
						<ColumnDefinition Width="110" />
					</Grid.ColumnDefinitions>
					<TextBlock
						Grid.Column="0"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="Latitude : " />
					<TextBlock
						Grid.Column="1"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="{Binding CurrentPosition.Lat, StringFormat=F8}" />
					<TextBlock
						Grid.Column="3"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="Longitude : " />
					<TextBlock
						Grid.Column="4"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="{Binding CurrentPosition.Lng, StringFormat=F8}" />
				</Grid>

				<Grid
					Grid.Column="3"
					Margin="5"
					VerticalAlignment="Center">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="40" />
						<ColumnDefinition Width="20" />
					</Grid.ColumnDefinitions>
					<TextBlock
						Grid.Column="0"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="Zoom : " />
					<TextBlock
						Grid.Column="1"
						HorizontalAlignment="Center"
						FontSize="12"
						FontWeight="Bold"
						Foreground="#8FFF"
						Text="{Binding MainMap.Zoom, FallbackValue=11}" />
				</Grid>
			</Grid>
		</Border>

		<Border
			x:Name="MapView_ZoomAndRotateController"
			Grid.Row="1"
			Grid.ColumnSpan="2"
			Width="250"
			Margin="5,5,300,5"
			Padding="5"
			HorizontalAlignment="Right"
			VerticalAlignment="Bottom"
			Background="#88888888"
			CornerRadius="5">

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="45" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="45" />
				</Grid.ColumnDefinitions>
				<Button
					x:Name="ZoomUp"
					Grid.Column="2"
					cal:Message.Attach="[Event Click] = [Action OnClickZoomUp($source, $eventArgs)]"
					Content="{md:PackIcon Kind=MagnifyPlus}" />
				<Slider
					x:Name="SliderZoom"
					Grid.Column="1"
					Maximum="{Binding MainMap.MaxZoom, UpdateSourceTrigger=PropertyChanged}"
					Minimum="{Binding MainMap.MinZoom, UpdateSourceTrigger=PropertyChanged}"
					SmallChange="1"
					TickPlacement="Both"
					ToolTip="{Binding MainMap.Zoom, UpdateSourceTrigger=PropertyChanged}"
					Value="{Binding MainMap.Zoom, UpdateSourceTrigger=PropertyChanged}" />
				<Button
					x:Name="ZoomDown"
					Grid.Column="0"
					cal:Message.Attach="[Event Click] = [Action OnClickZoomDown($source, $eventArgs)]"
					Content="{md:PackIcon Kind=MagnifyMinus}" />
			</Grid>
		</Border>
	</Grid>
</UserControl>
