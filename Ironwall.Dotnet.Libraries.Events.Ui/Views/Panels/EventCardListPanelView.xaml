<UserControl
	x:Class="Ironwall.Dotnet.Libraries.Events.Ui.Views.Panels.EventCardListPanelView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:behavior="clr-namespace:Ironwall.Dotnet.Libraries.Utils.Behaviors;assembly=Ironwall.Dotnet.Libraries.Utils"
	xmlns:behavior_inner="clr-namespace:Ironwall.Dotnet.Libraries.Events.Ui.Behaviors"
	xmlns:cal="http://caliburnmicro.com"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:enums="clr-namespace:Ironwall.Dotnet.Libraries.Enums;assembly=Ironwall.Dotnet.Libraries.Enums"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:local="clr-namespace:Ironwall.Dotnet.Libraries.Events.Ui.Views.Panels"
	xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:sys="clr-namespace:System;assembly=mscorlib"
	xmlns:utilPass="clr-namespace:Ironwall.Dotnet.Libraries.Utils.PasswordControl;assembly=Ironwall.Dotnet.Libraries.Utils"
	xmlns:utils="clr-namespace:Ironwall.Dotnet.Libraries.Utils;assembly=Ironwall.Dotnet.Libraries.Utils"
	FontFamily="{DynamicResource MaterialDesignFont}"
	mc:Ignorable="d">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>

		<GridSplitter
			Grid.Row="0"
			Height="1"
			Foreground="#88000000" />
		<Grid Grid.Row="1" VerticalAlignment="Center">
			<Border
				Margin="0,0,0,0"
				HorizontalAlignment="Stretch"
				Background="DodgerBlue"
				CornerRadius="2.5"
				Opacity="0.95"
				Style="{StaticResource MaterialDesignToolBarMainPanelBorderStyle}">

				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<StackPanel
						Grid.Column="0"
						Width="5"
						Background="DodgerBlue"
						Opacity="0.8" />
					<Viewbox
						Grid.Column="1"
						VerticalAlignment="Center"
						Stretch="UniformToFill">
						<Button
							x:Name="ButtonActionAll"
							md:RippleAssist.IsCentered="True"
							Foreground="WhiteSmoke"
							IsEnabled="{Binding ViewModelProvider.Count, Converter={StaticResource CountToBooleanConverter}}"
							Style="{StaticResource MaterialDesignIconForegroundButton}"
							ToolTip="전체지우기">
							<cal:Message.Attach>
								[Event Click] = [Action OnClickButtonActionAll($source, $eventArgs]
							</cal:Message.Attach>
							<md:PackIcon
								Width="23"
								Height="23"
								Kind="TrashCanOutline" />
						</Button>
					</Viewbox>

					<StackPanel
						Grid.Column="2"
						Margin="0,12,12,12"
						HorizontalAlignment="Right"
						Orientation="Horizontal">
						<TextBlock
							Margin="0,0,32,0"
							VerticalAlignment="Center"
							FontFamily="{StaticResource NotoSansCJKkRMedium}"
							FontSize="15"
							Foreground="WhiteSmoke"
							Opacity="0.80"
							Text="이벤트 수" />
						<TextBlock
							HorizontalAlignment="Stretch"
							VerticalAlignment="Center"
							FontFamily="{StaticResource NotoSansCJKkRMedium}"
							FontSize="15"
							Foreground="#40C4FF"
							Opacity="0.80"
							Text="{Binding ViewModelProvider.Count, FallbackValue=1000}" />
					</StackPanel>
				</Grid>
			</Border>
		</Grid>

		<Grid Grid.Row="3">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<Grid Grid.Row="1">
				<ListBox
					x:Name="ListBoxEvents"
					cal:Message.Attach="[Event MouseDoubleClick] = [Action OnClickEventCard($source, $eventArgs)]"
					ItemsSource="{Binding ViewModelProvider}"
					ScrollViewer.CanContentScroll="True"
					SelectedItem="{Binding SelectedEventCardViewModel}"
					VirtualizingPanel.IsVirtualizing="True"
					VirtualizingPanel.VirtualizationMode="Recycling">

					<ListBox.ItemContainerStyle>
						<Style BasedOn="{StaticResource MaterialDesignListBoxItem}" TargetType="ListBoxItem">
							<Setter Property="HorizontalContentAlignment" Value="Stretch" />
							<Setter Property="VerticalContentAlignment" Value="Stretch" />
							<Setter Property="Opacity" Value="0.95" />
						</Style>
					</ListBox.ItemContainerStyle>

					<ListBox.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel
								CanHorizontallyScroll="False"
								Orientation="Vertical"
								VirtualizingPanel.IsVirtualizing="True"
								VirtualizingPanel.VirtualizationMode="Recycling" />
						</ItemsPanelTemplate>
					</ListBox.ItemsPanel>
					<ListBox.ItemTemplate>
						<DataTemplate>
							<md:TransitioningContent>
								<md:TransitioningContent.OpeningEffects>
									<md:TransitionEffect Kind="SlideInFromRight" Duration="0:0:0.3" />
								</md:TransitioningContent.OpeningEffects>
								<Viewbox Stretch="Uniform" StretchDirection="DownOnly">
									<ContentControl cal:View.Model="{Binding}" />
								</Viewbox>
							</md:TransitioningContent>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</Grid>
	</Grid>
</UserControl>
