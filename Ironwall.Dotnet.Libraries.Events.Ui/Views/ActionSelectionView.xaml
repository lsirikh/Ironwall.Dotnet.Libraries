<UserControl
	x:Class="Ironwall.Dotnet.Libraries.Events.Ui.Views.ActionSelectionView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:cal="http://caliburnmicro.com"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:enums="clr-namespace:Ironwall.Dotnet.Libraries.Enums;assembly=Ironwall.Dotnet.Libraries.Enums"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:local="clr-namespace:Ironwall.Dotnet.Libraries.Events.Ui.Views"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:utils="clr-namespace:Ironwall.Dotnet.Libraries.Utils;assembly=Ironwall.Dotnet.Libraries.Utils"
	d:Background="WhiteSmoke"
	mc:Ignorable="d">

	<!--  View-model proxy (전역 DataContext 바인딩용)  -->
	<UserControl.Resources>
		<utils:BindingProxy x:Key="proxy" Data="{Binding}" />
	</UserControl.Resources>

	<GroupBox
		Margin="5"
		Style="{StaticResource MaterialDesignGroupBox}"
		UseLayoutRounding="True">
		<GroupBox.Header>
			<StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
				<md:PackIcon Kind="Settings" />
				<TextBlock
					Margin="5,0"
					VerticalAlignment="Center"
					Text="조치보고 속성" />
			</StackPanel>
		</GroupBox.Header>
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
				<!--  Apply Button  -->
			</Grid.RowDefinitions>

			<!--  ─────────────────────────────  INPUT GRID  ─────────────────────────────  -->
			<Grid Grid.Row="0">
				<!--  2 행 × 6 쌍(label + editor) = 12 열  -->
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="80" />
					<ColumnDefinition Width="2*" MinWidth="60" />
					<ColumnDefinition Width="80" />
					<ColumnDefinition Width="2*" MinWidth="60" />
					<ColumnDefinition Width="100" />
					<ColumnDefinition Width="2*" MinWidth="60" />
					<ColumnDefinition Width="80" />
					<ColumnDefinition Width="2*" MinWidth="60" />
					<ColumnDefinition Width="80" />
					<ColumnDefinition Width="2*" MinWidth="60" />
				</Grid.ColumnDefinitions>

				<TextBlock
					Grid.Row="0"
					Grid.Column="0"
					Style="{StaticResource TextBlockTitle}"
					Text="Type" />
				<ComboBox
					Grid.Row="0"
					Grid.Column="1"
					ItemsSource="{Binding Source={utils:EnumBindingSource {x:Type enums:EnumEventType}}}"
					SelectedItem="{Binding MessageType, Mode=TwoWay}"
					Style="{StaticResource ComboBoxContent}">
					<ComboBox.ItemsPanel>
						<ItemsPanelTemplate>
							<VirtualizingStackPanel />
						</ItemsPanelTemplate>
					</ComboBox.ItemsPanel>
				</ComboBox>

				<TextBlock
					Grid.Row="0"
					Grid.Column="2"
					Style="{StaticResource TextBlockTitle}"
					Text="User" />
				<TextBox
					Grid.Row="0"
					Grid.Column="3"
					md:HintAssist.Hint="admin"
					Style="{StaticResource TextBoxInput}"
					Text="{Binding User, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

				<TextBlock
					Grid.Row="0"
					Grid.Column="4"
					Style="{StaticResource TextBlockTitle}"
					Text="OriginEvent" />
				<ComboBox
					Grid.Row="0"
					Grid.Column="5"
					Grid.ColumnSpan="4"
					ItemsSource="{Binding Data.EventProvider, Source={StaticResource proxy}}"
					SelectedItem="{Binding OriginEvent, Mode=TwoWay}"
					Style="{StaticResource ComboBoxContent}">
					<!--  패널 지정 → 반드시 ItemsPanelTemplate 로 래핑  -->
					<ComboBox.ItemsPanel>
						<ItemsPanelTemplate>
							<VirtualizingStackPanel />
						</ItemsPanelTemplate>
					</ComboBox.ItemsPanel>

					<!--  실제 아이템 모양  -->
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<TextBlock Width="60" Text="{Binding Id}" />
								<TextBlock Width="80" Text="{Binding MessageType}" />
								<TextBlock Width="120" Text="{Binding Device.DeviceName}" />
								<TextBlock Width="140" Text="{Binding DateTime, StringFormat={}{0:yy-MM-dd HH:mm:ss}}" />
							</StackPanel>
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>

				<TextBlock
					Grid.Row="1"
					Grid.Column="0"
					Style="{StaticResource TextBlockTitle}"
					Text="Content" />
				<TextBox
					Grid.Row="1"
					Grid.Column="1"
					Grid.ColumnSpan="8"
					md:HintAssist.Hint="Action report contents"
					Style="{StaticResource TextBoxInput}"
					Text="{Binding Content, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
					TextWrapping="Wrap" />


			</Grid>

			<!--  ───────────────────────────  APPLY BUTTON  ───────────────────────────  -->
			<Button
				x:Name="ApplyButton"
				Grid.Row="1"
				Margin="0,10,0,0"
				HorizontalAlignment="Right"
				BorderBrush="{DynamicResource PrimaryHueDarkBrush}"
				Style="{StaticResource MaterialDesignFlatButton}">
				<Button.Content>
					<StackPanel Orientation="Horizontal">
						<md:PackIcon Kind="Check" Style="{StaticResource ButtonIcon}" />
						<TextBlock Style="{StaticResource ButtonTextBlock}" Text="적용" />
					</StackPanel>
				</Button.Content>
			</Button>
		</Grid>
	</GroupBox>

</UserControl>
